<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historique - Jen et ses Saints</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="historique.css">
</head>
<body>
    <div class="app-container">

        <!-- Header -->
        <header class="header">
            <a href="index.html" class="back-btn">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
            </a>
            <div class="header-content">
                <h1 class="header-title">Historique & Stats</h1>
                <p class="header-subtitle">Jen et ses Saints</p>
            </div>
            <div id="firebase-auth-container"></div>
        </header>

        <!-- Onglets principaux -->
        <nav class="segmented-tabs main-tabs">
            <button class="seg-tab tab-btn active" data-tab="matchStats">Stats Matchs</button>
            <button class="seg-tab tab-btn" data-tab="yearStats">Stats Ann√©e</button>
            <button class="seg-tab tab-btn" data-tab="setsStats">Sets jou√©s</button>
            <button class="seg-tab tab-btn" data-tab="visualStats">Stats visuelles</button>
        </nav>

        <!-- ==================== TAB 1 : Stats Matchs ==================== -->
        <main class="tab-content active" id="content-matchStats">

            <!-- Selecteur de matchs -->
            <div class="matches-container" id="matchesContainer" style="display: none;">
                <select class="match-select" id="matchSelect">
                    <option value="" disabled selected>S√©lectionner un match‚Ä¶</option>
                </select>
            </div>

            <!-- Detail match -->
            <div class="match-detail-container" id="matchDetailContainer">
                <div class="detail-header">
                    <!-- Bouton rouage (actions) -->
                    <div class="detail-gear-wrapper">
                        <button class="detail-gear-btn" id="detailGearBtn">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6A3.6 3.6 0 1115.6 12 3.611 3.611 0 0112 15.6z"/>
                            </svg>
                        </button>
                        <div class="detail-gear-menu" id="detailGearMenu">
                            <button class="gear-menu-item export" id="detailExportBtn">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                                Exporter stats
                            </button>
                            <span class="export-feedback" id="exportFeedback">Copi√© ‚úì</span>
                            <button class="gear-menu-item delete" id="detailDeleteBtn">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                </svg>
                                Supprimer ce match
                            </button>
                        </div>
                    </div>
                    <button class="detail-close-btn" id="detailCloseBtn">‚úï</button>
                    <div class="detail-result-icon" id="detailResultIcon">üèÜ</div>
                    <div class="detail-result-label" id="detailResultLabel">Victoire</div>

                    <!-- Score sets -->
                    <div class="detail-header-score">
                        <div class="detail-header-team">
                            <div class="detail-header-team-name">Jen et ses Saints</div>
                            <div class="detail-header-team-score" id="detailHomeSets">0</div>
                        </div>
                        <div class="detail-header-sep">‚Äì</div>
                        <div class="detail-header-team">
                            <div class="detail-header-team-name" id="detailAwayName">Adversaire</div>
                            <div class="detail-header-team-score" id="detailAwaySets">0</div>
                        </div>
                    </div>

                    <!-- Detail sets chips -->
                    <div class="detail-header-sets" id="detailHeaderSets"></div>

                    <div class="detail-opponent" id="detailOpponent">vs Adversaire</div>
                    <div class="detail-meta" id="detailMeta"></div>

                    <!-- Lien YouTube -->
                    <div id="detailYoutubeLink" style="display: none;"></div>
                </div>

                <!-- Onglets sets : [Global] [S1] [S2] ... [S5] -->
                <div class="detail-section">
                    <div class="segmented-tabs detail-set-tabs" id="detailSetTabs"></div>

                    <!-- Onglets categorie mobile : [Serv] [Rec] [Att] [Def] [Blc] -->
                    <div class="segmented-tabs stats-category-tabs" id="statsCategoryTabs"></div>

                    <!-- Vue mobile : tableau categorie selectionnee -->
                    <div class="stats-mobile" id="statsMobileContainer"></div>

                    <!-- Vue desktop : multi-cartes horizontales -->
                    <div class="stats-desktop" id="statsDesktopContainer"></div>

                    <!-- Side Out / Break Out -->
                    <div class="sideout-section">
                        <div class="sideout-section-title">Side Out / Break Out</div>
                        <div id="sideoutContainer"></div>
                    </div>

                    <!-- Timeline des series de points -->
                    <div class="timeline-section" id="timelineSection" style="display: none;">
                        <div class="timeline-section-title">S√©ries de points</div>
                        <div id="timelineContainer"></div>
                    </div>
                </div>

            </div>

            <!-- Empty state -->
            <div class="empty-state" id="emptyStateMatchStats">
                <div class="empty-state-icon stats">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                </div>
                <h3 class="empty-state-title">Aucun match enregistr√©</h3>
                <p class="empty-state-desc">Les statistiques de vos matchs appara√Ætront ici une fois que vous aurez termin√© votre premier match.</p>
                <a href="nouveau-match.html" class="empty-state-action">
                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    D√©marrer un match
                </a>
            </div>
        </main>

        <!-- ==================== TAB 2 : Stats Ann√©e ==================== -->
        <main class="tab-content" id="content-yearStats">
            <!-- Contenu genere dynamiquement par YearStatsView.render() -->
        </main>

        <!-- ==================== TAB 3 : Sets joues ==================== -->
        <main class="tab-content" id="content-setsStats">
            <!-- Contenu genere dynamiquement par SetsPlayedView.render() -->
        </main>

        <!-- ==================== TAB 4 : Stats visuelles ==================== -->
        <main class="tab-content" id="content-visualStats">
            <div class="empty-state">
                <div class="empty-state-icon visual">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/>
                    </svg>
                </div>
                <h3 class="empty-state-title">Stats visuelles</h3>
                <p class="empty-state-desc">Visualisations graphiques des statistiques de jeu. Disponible prochainement.</p>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            FSGT 4√ó4 ‚Ä¢ Saison 2025-2026
        </footer>
    </div>

    <!-- Firebase SDK (compat CDN) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="firebase-config.js?v=17.1"></script>
    <script src="firebase-sync.js?v=17.1"></script>

    <script src="storage.js?v=17.1"></script>
    <script src="historique.js?v=17.2"></script>
</body>
</html>
